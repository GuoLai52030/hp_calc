<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ€ªç‰©è¡€é‡åŠ¨æ€è®¡ç®—å™¨</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: sans-serif; padding: 15px; background: #fafafa; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .title { color: #333; margin-bottom: 20px; font-weight: bold; }
        .display-box { background: #1a1a1a; color: #00ff00; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-family: monospace; }
        .hp-text { font-size: 1.5em; color: #ff5252; }
        input[type=range] { width: 100%; margin: 15px 0; cursor: pointer; }
        canvas { max-height: 250px; }
    </style>
</head>
<body>

<div class="card">
    <div class="title">ğŸ©¸ æ€ªç‰©è¡€é‡ (HP) å®æ—¶æ¨¡æ‹Ÿ</div>
    
    <div class="display-box">
        ç­‰çº§ (L): <span id="levelVal">0</span><br>
        è¡€é‡ (HP): <span id="hpVal" class="hp-text">3703</span>
    </div>

    <input type="range" id="levelSlider" min="0" max="300" value="0" step="1">

    <canvas id="hpChart"></canvas>
</div>

<script>
    const ctx = document.getElementById('hpChart').getContext('2d');
    const levelSlider = document.getElementById('levelSlider');
    const levelVal = document.getElementById('levelVal');
    const hpVal = document.getElementById('hpVal');

    // --- æ ¸å¿ƒå…¬å¼é€»è¾‘ ---
    function calculateHP(L) {
        L = parseFloat(L);
        if (L <= 100) {
            return 3703 + 24.57 * L;
        } else if (L <= 200) {
            return 6160 + 262.68 * (L - 100);
        } else {
            return 32428 + 383.48 * (L - 200);
        }
    }

    // ç”ŸæˆèƒŒæ™¯æ›²çº¿çš„æ•°æ®ï¼ˆ0åˆ°300çº§ï¼Œæ¯éš”5çº§å–ä¸€ä¸ªç‚¹ï¼‰
    const labels = [];
    const curveData = [];
    for (let i = 0; i <= 300; i += 5) {
        labels.push(i);
        curveData.push(calculateHP(i));
    }

    // åˆå§‹åŒ–å›¾è¡¨
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [
                {
                    label: 'å½“å‰ä½ç½®',
                    data: [{x: 0, y: 3703}], // åˆå§‹ç‚¹
                    backgroundColor: '#ff5252',
                    pointRadius: 8,
                    pointHoverRadius: 10,
                    showLine: false,
                    zIndex: 10
                },
                {
                    label: 'HP è¶‹åŠ¿',
                    data: curveData,
                    borderColor: '#ccc',
                    borderWidth: 2,
                    pointRadius: 0,
                    fill: false,
                    tension: 0.1
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                x: { type: 'linear', min: 0, max: 300, title: {display: true, text: 'è¡€æœˆç­‰çº§'} },
                y: { title: {display: true, text: 'HP'} }
            },
            plugins: { legend: { display: false } }
        }
    });

    // ç›‘å¬æ»‘åŠ¨æ¡å˜åŒ–
    levelSlider.addEventListener('input', function() {
        const L = this.value;
        const HP = calculateHP(L);
        
        // æ›´æ–°æ–‡å­—
        levelVal.innerText = L;
        hpVal.innerText = Math.round(HP).toLocaleString();

        // æ›´æ–°å›¾è¡¨ä¸Šçš„çº¢ç‚¹
        chart.data.datasets[0].data = [{ x: parseFloat(L), y: HP }];
        chart.update('none'); // 'none' è¡¨ç¤ºä¸éœ€è¦åŠ¨ç”»ï¼Œè¿½æ±‚å®æ—¶æ„Ÿ
    });
</script>

</body>

</html>
